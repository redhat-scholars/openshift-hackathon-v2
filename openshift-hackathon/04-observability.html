<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: Openshift Hackathon</title>
    <link rel="canonical" href="https://redhat-scholars.github.io/openshift-hackathon-v2/openshift-hackathon/04-observability.html">
    <link rel="prev" href="03-helm_services.html">
    <link rel="next" href="05-resilience.html">
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img src="../_/img/NewRHDFullLogo_4-color_white-wordmark.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="https://redhat-scholars.github.io/openshift-hackathon-v2">Openshift Hackathon</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://developers.redhat.com/ebooks/" target="_blank">Books</a>
        <a class="navbar-item" href="https://developers.redhat.com/cheatsheets/" target="_blank">Cheat Sheets</a>
        <a class="navbar-item" href="https://developers.redhat.com/events/" target="_blank">Upcoming Events</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/kubernetes-tutorial/" target="_blank">Kubernetes</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/istio-tutorial/" target="_blank">Istio</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/quarkus-tutorial/" target="_blank">Quarkus</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/knative-tutorial/" target="_blank">Knative</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/tekton-tutorial/" target="_blank">Tekton</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="openshift-hackathon" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html"></a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="00-prerequis.html">0. Pré-requis</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="01-containers.html">1. Challenge 1 - Containers</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="02-openshift.html">2. Challenge 2 - OpenShift &amp; CI/CD</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="03-helm_services.html">3. Challenge 3 - Helm et Services</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="04-observability.html">4. Challenge 4 - Observabilité</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="05-resilience.html">5. Challenge 5 - Résilience et scalabilité</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="06-gitops.html">6. Challenge 6 - GitOps</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Openshift Hackathon</a></li>
    <li><a href="04-observability.html">4. Challenge 4 - Observabilité</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/redhat-scholars/openshift-hackathon-v2/edit/master/documentation/modules/ROOT/pages/04-observability.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<div class="sect1">
<h2 id="_observabilité"><a class="anchor" href="#_observabilité"></a>Observabilité</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Une fois déployé, on aura besoin d&#8217;un aperçu de ce qui se passe avec notre application et le cluster afin que nous puissions intervenir et ajuster notre application et configuration en fonction des besoins du monde "réel"</p>
</div>
<div class="sect2">
<h3 id="_challenge_4_1_beginner"><a class="anchor" href="#_challenge_4_1_beginner"></a>[<strong>Challenge 4.1</strong>] <em>Beginner</em></h3>
<div class="paragraph">
<p>Il est très important de pouvoir observer ce qui se passe dans le cluster. Que ce soit pour voir si une application utilise trop de ressources, ou être alerté en cas de charge inhabituelle, etc.  Vous allez découvrir que OpenShift a par défaut déjà pas mal de façons d&#8217;observer le cluster/les workloads/les projets etc.  Pour ce challenge vous allez devoir trouver des dashboards avec les métriques suivantes:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Memory Usage</strong> du déploiement "antennas-front" [dans la vue Topology]</p>
</li>
<li>
<p><strong>CPU Usage</strong> du déploiement "antennas-incident" dans les dernières 5 minutes  [dans la vue Developer &gt; Monitoring (ou Observe selon la version du cluster)]</p>
</li>
<li>
<p><strong>CPU Quota</strong> de tous les projets du cluster [dans la vue Administrator &gt; Monitoring (ou Observe selon la version di cluster) ]</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_preuves_à_fournir"><a class="anchor" href="#_preuves_à_fournir"></a>Preuves à fournir</h4>
<div class="ulist">
<ul>
<li>
<p>[<strong>Challenge 4.1.1</strong>] Screenshots (3) des observations</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_challenge_4_2_advanced"><a class="anchor" href="#_challenge_4_2_advanced"></a>[<strong>Challenge 4.2</strong>] <em>Advanced</em></h3>
<div class="paragraph">
<p>On va jouer un peu avec les "requests" et "limits" de notre déploiement antennas-front et observer ce qui se passe si on ne donne pas assez de resources à nos applications.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Rajoutez des limits et request au déploiement 'antennas-front'. Bien sûr en modifiant votre repo et en redéployant avec GitLab CI/CD</p>
<div class="ulist">
<ul>
<li>
<p>CPU Requests: 50 millicores</p>
</li>
<li>
<p>CPU Limits: 60 millicores</p>
</li>
<li>
<p>Memory Requests: 40 Mi</p>
</li>
<li>
<p>Memory Limits: 60 Mi</p>
</li>
</ul>
</div>
</li>
<li>
<p>Observer le déploiement.  Cherchez pourquoi l&#8217;application "tombe en panne".  À vous de nous le dire, et pourquoi :)  Et de nous expliquer la différence entre "requests" et "limits"</p>
</li>
<li>
<p>Ajuster les limits/requests de manière à ce que l&#8217;application fonctionne, mais sans utiliser trop de ressources.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_preuves_à_fournir_2"><a class="anchor" href="#_preuves_à_fournir_2"></a>Preuves à fournir</h4>
<div class="ulist">
<ul>
<li>
<p>[<strong>Challenge 4.2.1</strong>] Screenshots du yaml du déploiement</p>
</li>
<li>
<p>[<strong>Challenge 4.2.1</strong>] Nouvelles valeurs de limits/requests avec la raison pour laquelle vous avez choisi ces valeurs.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_bonus_challenge"><a class="anchor" href="#_bonus_challenge"></a>BONUS challenge</h3>
<div class="paragraph">
<p>Avec Quarkus c&#8217;est assez facile de rajouter des fonctionnalités qui peuvent être utiles dans des déploiements Kubernetes.  Essayez de rajouter l&#8217;extension Quarkus qui s&#8217;appelle 'micrometer' pour intégrer des métriques Java dans l&#8217;observabilité de OpenShift.   Voici un lien pour commencer: <a href="https://quarkus.io/blog/micrometer-prometheus-openshift/" class="bare">https://quarkus.io/blog/micrometer-prometheus-openshift/</a></p>
</div>
<div class="paragraph">
<p>Vous pouvez aussi regarder la branche 'micrometer' du repository antennas-front.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>[<strong>Challenge 4.3.1</strong>] Screenshot de Developer &gt; Observe &gt; Metrics avec les résultats de la custom query <code>jvm_memory_used_bytes{area="nonheap",id="CodeHeap 'profiled nmethods'",}</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="03-helm_services.html">3. Challenge 3 - Helm et Services</a></span>
  <span class="next"><a href="05-resilience.html">5. Challenge 5 - Résilience et scalabilité</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../_/js/vendor/clipboard.js"></script>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
